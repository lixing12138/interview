<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>懒加载</title>
    <style>
        *{
          margin: 0;
          padding: 0;
        }
        html, body{
            width: 100%;
            height: 100%;
        }
        div > img {
          max-width: 100%;
          cursor: pointer;
        }
    </style>
</head>
<body>
    <div>
        <img src="https://cdn.pixabay.com/photo/2015/09/09/16/05/forest-931706_1280.jpg" alt="ss" title="hhh">
    </div>
    <div>
        <img src="https://cdn.pixabay.com/photo/2014/08/01/00/08/pier-407252_1280.jpg" alt="">
    </div>
    <div>
        <img src="https://cdn.pixabay.com/photo/2014/12/15/17/16/pier-569314_1280.jpg" alt="">
    </div>
    <div>
        <img src="https://cdn.pixabay.com/photo/2010/12/13/10/09/abstract-2384_1280.jpg" alt="">
    </div>
    <div>
        <img src="https://cdn.pixabay.com/photo/2015/10/24/11/09/drop-of-water-1004250_1280.jpg">
    </div>
</body>
<script>
    // function throttle(fn, wait){
    //     let timeout = null;
    //     let pre = Date.now();
    //     return function(...rest){
    //         let cur = Date.now();
    //         if(cur - pre >= wait){
    //             fn.apply(this, rest);
    //         }
    //         pre = cur;
    //     }
    // }
    // window.addEventListener('scroll', throttle(lazyload, 200));
    // let imgs = document.getElementsByTagName('img');
    // let n = 0;
    // function lazyload(){
    //     let seeHeight = window.innerHeight;
    //     let scrollTop = document.documentElement.scrollTop;
    //     for(let i = n; i < imgs.length; i++){
    //         console.log(imgs[i].offsetTop);
    //         if(imgs[i].offsetTop < seeHeight + scrollTop){
    //             imgs[i].src = imgs[i].getAttribute('data-src');
    //         }
    //         n = i + 1;
    //     }
    // }

    // if (IntersectionObserver) {
    //   let lazyImageObserver = new IntersectionObserver((entries, observer) => {
    //     entries.forEach((entry, index) => {
    //       let lazyImage = entry.target;
    //       // 如果元素可见            
    //       if (entry.intersectionRatio > 0) {
    //         if (lazyImage.getAttribute("src") == "loading.gif") {
    //           lazyImage.src = lazyImage.getAttribute("data-src");
    //         }
    //         lazyImageObserver.unobserve(lazyImage)
    //       }
    //     })
    //   })
    //   for (let i = 0; i < imgs.length; i++) {
    //     lazyImageObserver.observe(imgs[i]);
    //   }
    // }
</script>
</html>